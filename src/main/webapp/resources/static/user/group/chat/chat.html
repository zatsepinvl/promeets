<div ng-controller="chatController"
     style="position: relative;">
    <div layout="row" style="margin: 20px auto 20px auto; width:40px;"
         ng-if="status.loading">
        <md-progress-circular md-mode="indeterminate"
                              md-diameter="30"
                              flex></md-progress-circular>
    </div>

    <md-list scroll-glue="glue" class="chat" id="chat" ng-if="messages.length" style="height: 50vh; overflow-y: auto;">
        <md-list-item class="no-hover md-3-line"
                      ng-repeat="message in messages | orderBy : 'message.time' : false  track by message.message.messageId"
                      style="min-height: 0;"
                      ng-class="{ 'new' : !message.viewed }"
                      ng-mouseover="!message.viewed && update(message)">
            <img ng-src="{{message.message.user.image.url}}" class="md-avatar min"/>
            <div class="md-list-item-text" layout="column">
                <h3 style="color:#2e7d32; font-size: 12px" ng-bind-html="message.message.user.firstName"></h3>
                <h4 style="color:#424242;" ng-bind-html="multiLine(message.message.text)"></h4>
                <h4 style="color:#757575; font-size: 10px; position: absolute; right:20px; top:8px;"
                    ng-bind-html="time(message.message.time)"></h4>
            </div>
        </md-list-item>
    </md-list>

    <md-list>
        <md-list-item class="no-hover primary">
            <md-input-container class="md-block" md-no-float style="width: 100%">
                <textarea ng-model="text" type="text" placeholder="Text"
                          style="font-size: 13px"
                          focus-if flex>
                    </textarea>
            </md-input-container>
            <md-button class="md-secondary"
                       ng-click="send()">
                Send
            </md-button>
        </md-list-item>
    </md-list>


</div>
	  
	  